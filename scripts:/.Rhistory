p
View(merged_bjp)
library(tidyverse)
incarn_df <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
states_abbrv <- read.csv("https://raw.githubusercontent.com/jasonong/List-of-US-States/master/states.csv")
View(incarn_df)
View(states_abbrv)
summary_info$prop_incarcerated <- incarn_df %>%
filter(year == max(year)) %>%
summarize(prop = sum(total_jail_pop, na.rm = T) / sum(total_pop, na.rm = T)) %>%
pull(prop)
summary_info <- list()
summary_info$prop_incarcerated <- incarn_df %>%
filter(year == max(year)) %>%
summarize(prop = sum(total_jail_pop, na.rm = T) / sum(total_pop, na.rm = T)) %>%
pull(prop)
summary_info$max_prop_incarcerated <- incarn_df %>%
group_by(year) %>%
summarize(prop = sum(total_jail_pop, na.rm = T) / sum(total_pop, na.rm = T)) %>%
filter(prop == max(prop)) %>%
pull(prop)
summary_info$max_prop_incarcerated_year <- incarn_df %>%
group_by(year) %>%
summarize(prop = sum(total_jail_pop, na.rm = T) / sum(total_pop, na.rm = T)) %>%
filter(prop == max(prop)) %>%
pull(year)
summary_info$region_highest_prop_incarceration <- incarn_df %>%
group_by(year, region) %>%
summarize(prop = sum(total_jail_pop, na.rm = T) / sum(total_pop, na.rm = T)) %>%
filter(prop == max(prop)) %>%
pull(region) %>%
nth(1)
total_by_year <- incarn_df %>%
group_by(year) %>%
summarize(total_pop = sum(total_pop), total_jail_pop = sum(total_jail_pop, na.rm = T))
prop_population_jailed_region <- incarn_df %>%
group_by(year, region) %>%
summarise(sum_pop = sum(total_pop), sum_jail_pop = sum(total_jail_pop * 100, na.rm = T), prop = sum_jail_pop / sum_pop) %>%
ggplot() +
geom_point(mapping = aes(x = year, y = prop, color = region), alpha = 0.25)
prop_blacks_jailed_region <- incarn_df %>%
group_by(year, region) %>%
summarise(sum_black_pop = sum(black_pop_15to64, na.rm = T), sum_black_jail_pop = sum(black_jail_pop * 100, na.rm = T), prop = sum_black_jail_pop / sum_black_pop) %>%
ggplot() +
geom_point(mapping = aes(x = year, y = prop, color = region), alpha = 0.25)
incarn_df %>% group_by(year) %>%
summarise(blacks_total = sum(black_jail_pop, na.rm = T), latins_total = sum(latinx_jail_pop, na.rm = T), whites_total = sum(white_jail_pop, na.rm = T), natives_total = sum(native_jail_pop, na.rm = T) , others_total = sum(other_race_jail_pop, na.rm = T)) %>%
filter(year > 1984) %>%
ggplot() +
geom_point(mapping = aes(x = year, y = blacks_total), color = "purple", alpha = 0.25) +
geom_point(mapping = aes(x = year, y = latins_total), color = "green", alpha = 0.25) +
geom_point(mapping = aes(x = year, y = whites_total), color = "blue", alpha = 0.25) +
geom_point(mapping = aes(x = year, y = natives_total), color = "orange", alpha = 0.25) +
geom_point(mapping = aes(x = year, y = others_total), color = "black", alpha = 0.25) +
labs(x = "Year", y = "Jail Population")
source('~/Desktop/INFO201/a3-klobby19/analysis.R', echo=TRUE)
region_type_timeseries <- incarn_df %>%
group_by(urbanicity, year) %>%
summarise(jail_prop_pop = total_jail_pop / total_pop) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = jail_prop_pop, color = urbanicity))
region_type_timeseries
incarn_df %>%
group_by(urbanicity, year) %>%
summarise(jail_prop_pop = total_jail_pop / total_pop)
region_type_timeseries <- incarn_df %>%
group_by(urbanicity, year) %>%
summarise(jail_prop_pop = total_jail_pop / total_pop) %>%
filter(!is.na(jail_prop_pop))
ggplot() +
geom_line(mapping = aes(x = year, y = jail_prop_pop, color = urbanicity))
region_type_timeseries <- incarn_df %>%
group_by(urbanicity, year) %>%
summarise(jail_prop_pop = total_jail_pop / total_pop) %>%
filter(!is.na(jail_prop_pop)) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = jail_prop_pop, color = urbanicity))
region_type_timeseries
region_type_timeseries <- incarn_df %>%
group_by(urbanicity, year) %>%
summarise(jail_prop_pop = mean(total_jail_pop / total_pop, na.rm = TRUE)) %>%
filter(!is.na(jail_prop_pop)) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = jail_prop_pop, color = urbanicity))
region_type_timeseries
dis_adm_timeseries <- incarn_df %>%
group_by(year) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = total_jail_dis)) +
geom_line(mapping = aes(x = year, y = total_prison_adm))
dis_adm_timeseries
dis_adm_timeseries <- incarn_df %>%
group_by(year) %>%
filter(!is.na(total_jail_dis) & !is.na(total_jail_adm)) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = total_jail_dis)) +
geom_line(mapping = aes(x = year, y = total_prison_adm))
dis_adm_timeseries
group_by(year) %>%
summarise(avg_dis = mean(total_jail_dis, avg_adm = mean(total_prison_adm))) %>%
geom_line(mapping = aes(x = year, y = avg_dis) +
dis_adm_timeseries
dis_adm_timeseries <- incarn_df %>%
group_by(year) %>%
filter(!is.na(total_jail_dis) & !is.na(total_jail_adm)) %>%
summarise(avg_dis = mean(total_jail_dis, avg_adm = mean(total_prison_adm))) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = avg_dis) +
geom_line(mapping = aes(x = year, y = avg_adm))
dis_adm_timeseries
dis_adm_timeseries <- incarn_df %>%
group_by(year) %>%
filter(!is.na(total_jail_dis) & !is.na(total_jail_adm)) %>%
summarise(avg_dis = mean(total_jail_dis, avg_adm = mean(total_prison_adm))) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = avg_dis)) +
geom_line(mapping = aes(x = year, y = avg_adm))
dis_adm_timeseries
dis_adm_timeseries <- incarn_df %>%
group_by(year) %>%
filter(!is.na(total_jail_dis) & !is.na(total_jail_adm)) %>%
summarise(avg_dis = mean(total_jail_dis), avg_adm = mean(total_prison_adm)) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = avg_dis)) +
geom_line(mapping = aes(x = year, y = avg_adm))
dis_adm_timeseries
dis_adm_timeseries <- incarn_df %>%
group_by(year) %>%
summarise(avg_dis = mean(total_jail_dis, na.rm = TRUE), avg_adm = mean(total_prison_adm, na.rm = TRUE)) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = avg_dis)) +
geom_line(mapping = aes(x = year, y = avg_adm))
dis_adm_timeseries
dis_adm_timeseries <- incarn_df %>%
group_by(year) %>%
summarise(avg_dis = mean(total_jail_dis, na.rm = TRUE), avg_adm = mean(total_prison_adm, na.rm = TRUE)) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = avg_dis), color = "blue") +
geom_line(mapping = aes(x = year, y = avg_adm), color = "red")
dis_adm_timeseries
region_type_timeseries <- incarn_df %>%
group_by(urbanicity, year) %>%
summarise(jail_prop_pop = mean(total_jail_pop / total_pop, na.rm = TRUE)) %>%
filter(!is.na(jail_prop_pop)) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = jail_prop_pop, color = urbanicity))
region_type_timeseries
region_timeseries <- incarn_df %>%
group_by(region, year) %>%
summarise(avg_bp = mean(black_pop_15to64 / total_pop_15to64, na.rm = TRUE), avg_bjp = mean(black_jail_pop / total_jail_pop, na.rm = TRUE)) %>%
filter(avg_bjp != 0) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = avg_bp - avg_bjp, color = region)) +
ylab("Difference of Prop") + ggtitle("Difference of Black Population Proportion and Black Jail Population Proportion")
region_timeseries
View(summary_info)
region_prop_timeseries <- incarn_df %>%
group_by(region, year) %>%
summarise(avg_bp = mean(black_pop_15to64 / total_pop_15to64, na.rm = TRUE), avg_bjp = mean(black_jail_pop / total_jail_pop, na.rm = TRUE)) %>%
filter(avg_bjp != 0) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = avg_bp / avg_bjp, color = region)) +
ylab("Ratio of Prop")
region_prop_timeseries
summary_info$prop_highest_blackprop_incarcerated <- incarn_df %>%
group_by(region) %>%
summarize(prop = sum(black_jail_pop, na.rm = T) / sum(total_jail_pop, na.rm = T)) %>%
filter(prop = max(prop)) %>%
pull(prop)
summary_info$prop_highest_blackprop_incarcerated <- incarn_df %>%
group_by(region) %>%
summarize(prop = sum(black_jail_pop, na.rm = T) / sum(total_jail_pop, na.rm = T)) %>%
filter(prop == max(prop)) %>%
pull(prop)
summary_info$region_highest_blackprop_incarcerated <- incarn_df %>%
group_by(region) %>%
summarize(prop = sum(black_jail_pop, na.rm = T) / sum(total_jail_pop, na.rm = T)) %>%
filter(prop == max(prop)) %>%
pull(region)
View(summary_info)
summary_info$prop_highest_blackprop_incarcerated <- incarn_df %>%
group_by(region) %>%
summarize(prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T)) %>%
filter(prop == max(prop)) %>%
pull(prop)
summary_info$region_highest_blackprop_incarcerated <- incarn_df %>%
group_by(region) %>%
summarize(prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T)) %>%
filter(prop == max(prop)) %>%
pull(region)
View(summary_info)
summary_info$state_highest_blackprop_incarcerated <- incarn_df %>%
group_by(state) %>%
summarize(prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T)) %>%
filter(prop == max(prop)) %>%
pull(state)
View(summary_info)
incarn_df %>%
group_by(state) %>%
summarize(prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T)) %>%
filter(prop == max(prop))
incarn_df %>%
group_by(state)
incarn_df %>%
group_by(state) %>%
summarize(prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T))
incarn_df %>%
group_by(state) %>%
summarize(bjail_prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T), bpop_prop = mean(black_pop_15to64, na.rm = T) / mean(total_pop_15to64, na.rm = T))
summary_info$state_highest_blackprop_incarcerated <- incarn_df %>%
group_by(state) %>%
summarize(bjail_prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T), bpop_prop = mean(black_pop_15to64, na.rm = T) / mean(total_pop_15to64, na.rm = T)) %>%
filter(bjail_prop == max(prop)) %>%
pull(state)
summary_info$state_highest_blackprop_incarcerated <- incarn_df %>%
group_by(state) %>%
summarize(bjail_prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T), bpop_prop = mean(black_pop_15to64, na.rm = T) / mean(total_pop_15to64, na.rm = T)) %>%
filter(bjail_prop == max(bjail_prop)) %>%
pull(state)
View(summary_info)
summary_info$state_highest_blackprop_incarcerated <- incarn_df %>%
group_by(state) %>%
summarize(bjail_prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T), bpop_prop = mean(black_pop_15to64, na.rm = T) / mean(total_pop_15to64, na.rm = T)) %>%
filter(bjail_prop == max(bjail_prop)) %>%
pull(state)
View(summary_info)
incarn_df %>%
group_by(state) %>%
summarize(bjail_prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T), bpop_prop = mean(black_pop_15to64, na.rm = T) / mean(total_pop_15to64, na.rm = T))
incarn_df %>% filter(state == "CT")
incarn_df %>% filter(state == "CT") %>% summarise(mean(black_jail_pop))
incarn_df %>% filter(state == "CT") %>% summarise(mean(black_jail_pop, na.rm=T))
incarn_df %>% filter(state == "CT") %>% select(black_jail_pop)
summary_info$state_highest_blackprop_incarcerated <- incarn_df %>%
group_by(state) %>%
summarize(bjail_prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T), bpop_prop = mean(black_pop_15to64, na.rm = T) / mean(total_pop_15to64, na.rm = T)) %>%
filter(bjail_prop == max(bjail_prop), na.rm = T) %>%
pull(state)
summary_info$state_highest_blackprop_incarcerated <- incarn_df %>%
group_by(state) %>%
summarize(bjail_prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T), bpop_prop = mean(black_pop_15to64, na.rm = T) / mean(total_pop_15to64, na.rm = T)) %>%
filter(bjail_prop == max(bjail_prop), na.rm != T) %>%
pull(state)
summary_info$state_highest_blackprop_incarcerated <- incarn_df %>%
group_by(state) %>%
summarize(bjail_prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T), bpop_prop = mean(black_pop_15to64, na.rm = T) / mean(total_pop_15to64, na.rm = T)) %>%
filter(bjail_prop == max(bjail_prop), !is.na(bjail_prop)) %>%
pull(state)
View(summary_info)
summary_info$state_highest_blackprop_incarcerated <- incarn_df %>%
group_by(state) %>%
summarize(bjail_prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T), bpop_prop = mean(black_pop_15to64, na.rm = T) / mean(total_pop_15to64, na.rm = T)) %>%
filter(!is.na(bjail_prop)) %>%
filter(bjail_prop == max(bjail_prop)) %>%
pull(state)
View(summary_info)
summary_info$prop_incarcerated <- incarn_df %>%
filter(year == max(year)) %>%
summarize(prop = mean(total_jail_pop, na.rm = T) / mean(total_pop, na.rm = T)) %>%
pull(prop)
summary_info$max_prop_incarcerated <- incarn_df %>%
group_by(year) %>%
summarize(prop = mean(total_jail_pop, na.rm = T) / mean(total_pop, na.rm = T)) %>%
filter(prop == max(prop)) %>%
pull(prop)
summary_info$max_prop_incarcerated_year <- incarn_df %>%
group_by(year) %>%
summarize(prop = mean(total_jail_pop, na.rm = T) / mean(total_pop, na.rm = T)) %>%
filter(prop == max(prop)) %>%
pull(year)
summary_info$region_highest_prop_incarceration <- incarn_df %>%
group_by(year, region) %>%
summarize(prop = mean(total_jail_pop, na.rm = T) / mean(total_pop, na.rm = T)) %>%
filter(prop == max(prop)) %>%
pull(region) %>%
nth(1)
summary_info$region_highest_blackprop_incarcerated <- incarn_df %>%
group_by(region) %>%
summarize(prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T)) %>%
filter(prop == max(prop)) %>%
pull(prop)
summary_info$region_highest_blackprop_incarcerated <- incarn_df %>%
group_by(region) %>%
summarize(prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T)) %>%
filter(prop == max(prop)) %>%
pull(region)
summary_info$state_highest_blackprop_incarcerated <- incarn_df %>%
group_by(state) %>%
summarize(bjail_prop = mean(black_jail_pop, na.rm = T) / mean(total_jail_pop, na.rm = T), bpop_prop = mean(black_pop_15to64, na.rm = T) / mean(total_pop_15to64, na.rm = T)) %>%
filter(!is.na(bjail_prop)) %>%
filter(bjail_prop == max(bjail_prop)) %>%
pull(state)
View(summary_info)
View(incarn_df)
race_propdiff_timeseries <- incarn_df %>%
group_by(year) %>%
summarise(aapi_diff = mean(aapi_prison_pop / total_prison_pop, na.rm = T) - mean(aapi_pop_15to64 / total_pop_15to64, na.rm = T), black_diff = mean(black_prison_pop / black_prison_pop, na.rm = T) - mean(black_pop_15to64 / total_pop_15to64, na.rm = T), lantin_diff = mean(latinx_prison_pop / total_prison_pop, na.rm = T) - mean(latinx_pop_15to64 / total_pop_15to64, na.rm = T), native_diff = mean(native_prison_pop / total_prison_pop, na.rm = T) - mean(native_pop_15to64 / total_pop_15to64, na.rm = T), white_diff = mean(white_prison_pop / total_prison_pop, na.rm = T) - mean(white_pop_15to64 / total_pop_15to64, na.rm = T))
View(race_propdiff_timeseries)
race_propdiff_timeseries <- incarn_df %>%
group_by(year) %>%
summarise(aapi_diff = mean(aapi_prison_pop / total_prison_pop, na.rm = T) - mean(aapi_pop_15to64 / total_pop_15to64, na.rm = T), black_diff = mean(black_prison_pop / black_prison_pop, na.rm = T) - mean(black_pop_15to64 / total_pop_15to64, na.rm = T), lantin_diff = mean(latinx_prison_pop / total_prison_pop, na.rm = T) - mean(latinx_pop_15to64 / total_pop_15to64, na.rm = T), native_diff = mean(native_prison_pop / total_prison_pop, na.rm = T) - mean(native_pop_15to64 / total_pop_15to64, na.rm = T), white_diff = mean(white_prison_pop / total_prison_pop, na.rm = T) - mean(white_pop_15to64 / total_pop_15to64, na.rm = T)) %>%
filter(!is.na(aapi_diff)) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = aapi_diff)) +
geom_line(mapping = aes(x = year, y = black_diff)) +
geom_line(mapping = aes(x = year, y = latinx_diff)) +
geom_line(mapping = aes(x = year, y = native_diff)) +
geom_line(mapping = aes(x = year, y = white_diff)) + scale_color_manual(values=c("#CC6666", "#9999CC"))
race_propdiff_timeseries
race_propdiff_timeseries <- incarn_df %>%
group_by(year) %>%
summarise(aapi_diff = mean(aapi_prison_pop / total_prison_pop, na.rm = T) - mean(aapi_pop_15to64 / total_pop_15to64, na.rm = T), black_diff = mean(black_prison_pop / black_prison_pop, na.rm = T) - mean(black_pop_15to64 / total_pop_15to64, na.rm = T), lantin_diff = mean(latinx_prison_pop / total_prison_pop, na.rm = T) - mean(latinx_pop_15to64 / total_pop_15to64, na.rm = T), native_diff = mean(native_prison_pop / total_prison_pop, na.rm = T) - mean(native_pop_15to64 / total_pop_15to64, na.rm = T), white_diff = mean(white_prison_pop / total_prison_pop, na.rm = T) - mean(white_pop_15to64 / total_pop_15to64, na.rm = T)) %>%
filter(!is.na(aapi_diff)) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = aapi_diff)) +
geom_line(mapping = aes(x = year, y = black_diff)) +
geom_line(mapping = aes(x = year, y = latin_diff)) +
geom_line(mapping = aes(x = year, y = native_diff)) +
geom_line(mapping = aes(x = year, y = white_diff)) + scale_color_manual(values=c("#CC6666", "#9999CC"))
race_propdiff_timeseries
race_propdiff_timeseries <- incarn_df %>%
group_by(year) %>%
summarise(aapi_diff = mean(aapi_prison_pop / total_prison_pop, na.rm = T) - mean(aapi_pop_15to64 / total_pop_15to64, na.rm = T), black_diff = mean(black_prison_pop / black_prison_pop, na.rm = T) - mean(black_pop_15to64 / total_pop_15to64, na.rm = T), latin_diff = mean(latinx_prison_pop / total_prison_pop, na.rm = T) - mean(latinx_pop_15to64 / total_pop_15to64, na.rm = T), native_diff = mean(native_prison_pop / total_prison_pop, na.rm = T) - mean(native_pop_15to64 / total_pop_15to64, na.rm = T), white_diff = mean(white_prison_pop / total_prison_pop, na.rm = T) - mean(white_pop_15to64 / total_pop_15to64, na.rm = T)) %>%
filter(!is.na(aapi_diff)) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = aapi_diff)) +
geom_line(mapping = aes(x = year, y = black_diff)) +
geom_line(mapping = aes(x = year, y = latin_diff)) +
geom_line(mapping = aes(x = year, y = native_diff)) +
geom_line(mapping = aes(x = year, y = white_diff)) + scale_color_manual(values=c("#CC6666", "#9999CC"))
race_propdiff_timeseries
gather(race_propdiff_timeseries)
race_propdiff_timeseries <- incarn_df %>%
group_by(year) %>%
summarise(aapi_diff = mean(aapi_prison_pop / total_prison_pop, na.rm = T) - mean(aapi_pop_15to64 / total_pop_15to64, na.rm = T), black_diff = mean(black_prison_pop / black_prison_pop, na.rm = T) - mean(black_pop_15to64 / total_pop_15to64, na.rm = T), latin_diff = mean(latinx_prison_pop / total_prison_pop, na.rm = T) - mean(latinx_pop_15to64 / total_pop_15to64, na.rm = T), native_diff = mean(native_prison_pop / total_prison_pop, na.rm = T) - mean(native_pop_15to64 / total_pop_15to64, na.rm = T), white_diff = mean(white_prison_pop / total_prison_pop, na.rm = T) - mean(white_pop_15to64 / total_pop_15to64, na.rm = T)) %>%
filter(!is.na(aapi_diff))
gather(race_propdiff_timeseries)
View(race_propdiff_timeseries)
gather(race_propdiff_timeseries, key = year)
spread(race_propdiff_timeseries, key = year)
spread(race_propdiff_timeseries, key = year)
spread(race_propdiff_timeseries)
race_propdiff_timeseries %>% spread(year)
race_propdiff_timeseries %>% gather(race, value, -year)
race_propdiff_timeseries %>% gather(race, value, -year) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = value), color = race)
race_df <- race_propdiff_timeseries %>% gather(race, value, -year)
View(race_df)
race_propdiff_timeseries %>% gather(race, value, -year) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = value, color = race))
race_propdiff_timeseries %>% gather(race, propdiff, -year) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = value, color = race))
race_propdiff_timeseries %>% gather(race, propdiff, -year) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = propdiff, color = race))
View(race_propdiff_timeseries)
race_propdiff_timeseries <- incarn_df %>%
group_by(year) %>%
summarise(aapi_diff = mean(aapi_prison_pop / total_prison_pop, na.rm = T) / mean(aapi_pop_15to64 / total_pop_15to64, na.rm = T), black_diff = mean(black_prison_pop / black_prison_pop, na.rm = T) / mean(black_pop_15to64 / total_pop_15to64, na.rm = T), latin_diff = mean(latinx_prison_pop / total_prison_pop, na.rm = T) / mean(latinx_pop_15to64 / total_pop_15to64, na.rm = T), native_diff = mean(native_prison_pop / total_prison_pop, na.rm = T) / mean(native_pop_15to64 / total_pop_15to64, na.rm = T), white_diff = mean(white_prison_pop / total_prison_pop, na.rm = T) / mean(white_pop_15to64 / total_pop_15to64, na.rm = T)) %>%
filter(!is.na(aapi_diff))
race_propdiff_timeseries %>% gather(race, propdiff, -year) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = propdiff, color = race))
race_propdiff_timeseries <- incarn_df %>%
group_by(year) %>%
summarise(aapi_diff = mean(aapi_prison_pop / total_prison_pop, na.rm = T) - mean(aapi_pop_15to64 / total_pop_15to64, na.rm = T), black_diff = mean(black_prison_pop / black_prison_pop, na.rm = T) - mean(black_pop_15to64 / total_pop_15to64, na.rm = T), latin_diff = mean(latinx_prison_pop / total_prison_pop, na.rm = T) - mean(latinx_pop_15to64 / total_pop_15to64, na.rm = T), native_diff = mean(native_prison_pop / total_prison_pop, na.rm = T) - mean(native_pop_15to64 / total_pop_15to64, na.rm = T), white_diff = mean(white_prison_pop / total_prison_pop, na.rm = T) - mean(white_pop_15to64 / total_pop_15to64, na.rm = T)) %>%
filter(!is.na(aapi_diff))
race_propdiff_timeseries %>% gather(race, propdiff, -year) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = propdiff, color = race))
race_propdiff_timeseries %>% gather(race, propdiff, -year) %>%
ggplot() +
geom_line(mapping = aes(x = year, y = propdiff, color = race)) +
theme_linedraw()
incarn_df %>%
mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
filter(black_pop_prop > 0.5) %>%
group_by(year) %>%
ggplot() +
geom_line(mapping = aes(x = year, mean(black_prison_pop, na.rm = T)))
incarn_df %>%
mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
filter(black_pop_prop > 0.25) %>%
group_by(year) %>%
ggplot() +
geom_line(mapping = aes(x = year, mean(black_prison_pop, na.rm = T)))
incarn_df %>%
mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
filter(black_pop_prop > 0.5)
counties <- map_data("county")
View(counties)
incarn_df <- incarn_df %>% rename("subregion" = "county_name")
incarn_df$subregion <- gsub("\\s*\\w*$", "", incarn_df$subregion)
incarn_df$subregion <- str_to_lower(gsub("\\s*\\w*$", "", incarn_df$subregion))
incarn_df <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
states_abbrv <- read.csv("https://raw.githubusercontent.com/jasonong/List-of-US-States/master/states.csv")
incarn_df <- incarn_df %>% rename("subregion" = "county_name")
incarn_df$subregion <- str_to_lower(gsub("\\s*\\w*$", "", incarn_df$subregion))
states_abbrv <- states_abbrv %>% rename("state_full" = "State")
incarn_df <- left_join(incarn_df, states_abbrv, by=c("state" = "Abbreviation"))
incarn_df$state_full <- str_to_lower(incarn_df$state_full)
incarn_df <- incarn_df %>% relocate(state_full, .after = state)
counties <- map_data("county")
counties_combined <- left_join(incarn_df, counties, by = c("state_full" = "region", "subregion" = "subregion"))
View(counties_combined)
countries_combined %>%
mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
filter(black_pop_prop > 0.25) %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group),
color="darkblue", fill=black_prison_pop / total_prison_pop, size = .1 )
counties_combined %>%
mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
filter(black_pop_prop > 0.25) %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group),
color="darkblue", fill=black_prison_pop / total_prison_pop, size = .1 )
counties_combined %>%
mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
filter(black_pop_prop > 0.25) %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group),
color="darkblue", fill=(black_prison_pop / total_prison_pop), size = .1 )
counties_combined %>%
mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
filter(black_pop_prop > 0.25) %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group,fill=(black_prison_pop / total_prison_pop)),
color="darkblue", size = .1 )
states <- map_data("state")
counties_combined %>%
mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
filter(black_pop_prop > 0.25) %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group,fill=(black_prison_pop / total_prison_pop)),color="darkblue", size = .1 )  +
geom_polygon( data=states, aes(x=long, y=lat, group=group),
color="black", fill="lightblue",  size = 1, alpha = .3)
library(viridis)
counties_combined %>%
mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
filter(black_pop_prop > 0.25) %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group,fill=(black_prison_pop / total_prison_pop)),color="darkblue", size = .1 ) +
scale_fill_viridis_c() +
geom_polygon( data=states, aes(x=long, y=lat, group=group),
color="black", fill="gray",  size = 1, alpha = .3)
counties_combined %>%
mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
filter(black_pop_prop > 0.25) %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group,fill=(black_prison_pop / total_prison_pop)),color="darkblue", size = .1 ) +
scale_fill_viridis_c() +
geom_polygon( data=states, aes(x=long, y=lat, group=group),
color="black", fill="gray",  size = 0.5, alpha = .3)
counties_combined %>%
mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
filter(black_pop_prop < 0.25) %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group,fill=(black_prison_pop / total_prison_pop)),color="darkblue", size = .1 ) +
scale_fill_viridis_c() +
geom_polygon( data=states, aes(x=long, y=lat, group=group),
color="black", fill="gray",  size = 0.5, alpha = .3)
counties_combined %>%
mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
filter(black_pop_prop < 0.25) %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group,fill=(black_prison_pop / total_prison_pop)),color="darkblue", size = .1 ) +
scale_fill_viridis_c() +
geom_polygon( data=states, aes(x=long, y=lat, group=group),
color="black", size = 0.5, alpha = .3)
counties_combined %>%
mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
filter(black_pop_prop < 0.25) %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group,fill=(black_prison_pop / total_prison_pop)),color="darkblue", size = .1 ) +
scale_fill_viridis_b() +
geom_polygon( data=states, aes(x=long, y=lat, group=group),
color="black", size = 0.5, alpha = .3)
counties_combined %>%
# mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
# filter(black_pop_prop < 0.25) %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group,fill=(black_prison_pop / total_prison_pop)),color="darkblue", size = .1 ) +
scale_fill_viridis_b() +
geom_polygon( data=states, aes(x=long, y=lat, group=group),
color="black", size = 0.5, alpha = .3)
counties_combined %>%
# mutate(black_pop_prop = black_pop_15to64 / total_pop_15to64) %>%
# filter(black_pop_prop < 0.25) %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group,fill=(black_prison_pop / total_prison_pop)),size = .1 ) +
scale_fill_viridis_b() +
geom_polygon( data=states, aes(x=long, y=lat, group=group),
color="black", size = 0.5, alpha = .3)
counties_combined %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group,fill=mean(black_prison_pop / total_prison_pop, na.rm=T)),size = .1 ) +
scale_fill_viridis_b() +
geom_polygon( data=states, aes(x=long, y=lat, group=group),
color="black", size = 0.5, alpha = .3)
counties_combined %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group,fill=(black_prison_pop / total_prison_pop)),size = .1 ) +
scale_fill_viridis_b() +
geom_polygon( data=states, aes(x=long, y=lat, group=group),
color="black", size = 0.5, alpha = .3)
counties_combined %>%
group_by(region) %>%
summarise(long,lat,avg_prop=mean(black_prison_pop / total_prison_pop))
counties_combined %>%
group_by(region) %>%
summarise(long,lat,avg_prop=mean(black_prison_pop / total_prison_pop)) %>%
ggplot() + geom_polygon(aes(x=long, y=lat, group=group,fill=avg_prop),size = .1 ) +
scale_fill_viridis_b() +
geom_polygon( data=states, aes(x=long, y=lat, group=group),
color="black", size = 0.5, alpha = .3)
counties_combined %>%
group_by(region) %>%
summarise(long,lat,avg_prop=mean(black_prison_pop / total_prison_pop)) %>%
ggplot() + geom_polygon(aes(x=long, y=lat,fill=avg_prop),size = .1 ) +
scale_fill_viridis_b() +
geom_polygon( data=states, aes(x=long, y=lat, group=group),
color="black", size = 0.5, alpha = .3)
